<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 1084.525390625 1000.421875" style="max-width: 1084.53px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:2px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span,#my-svg p{color:#333;}#my-svg .label text,#my-svg span,#my-svg p{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .flowchart-label text{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .node .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:#e8e8e8;text-align:center;}#my-svg .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span,#my-svg p{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="my-svg_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="my-svg_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-NeedPos LE-TwoSnapshots" id="L-NeedPos-TwoSnapshots-0" d="M333.092,33.5L333.092,37.667C333.092,41.833,333.092,50.167,333.158,57.7C333.224,65.234,333.356,71.967,333.422,75.334L333.488,78.701"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TwoSnapshots LE-Interpolate" id="L-TwoSnapshots-Interpolate-0" d="M263.538,311.868L248.021,329.169C232.505,346.469,201.471,381.071,185.954,403.196C170.438,425.322,170.438,434.972,170.438,439.797L170.438,444.622"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Interpolate LE-IgnoreVel" id="L-Interpolate-IgnoreVel-0" d="M170.438,483.422L170.438,487.589C170.438,491.755,170.438,500.089,170.438,519.914C170.438,539.739,170.438,571.055,170.438,586.714L170.438,602.372"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TwoSnapshots LE-Extrapolate" id="L-TwoSnapshots-Extrapolate-0" d="M403.645,311.868L418.996,329.169C434.346,346.469,465.046,381.071,480.396,403.196C495.746,425.322,495.746,434.972,495.746,439.797L495.746,444.622"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Extrapolate LE-HasServerVel" id="L-Extrapolate-HasServerVel-0" d="M495.746,483.422L495.746,487.589C495.746,491.755,495.746,500.089,495.812,507.622C495.878,515.156,496.01,521.889,496.076,525.256L496.142,528.623"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-HasServerVel LE-UseServerVel" id="L-HasServerVel-UseServerVel-0" d="M442.7,662.376L421.697,676.925C400.694,691.474,358.688,720.573,337.685,739.948C316.682,759.322,316.682,768.972,316.682,773.797L316.682,778.622"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-HasServerVel LE-UseClientVel" id="L-HasServerVel-UseClientVel-0" d="M549.792,662.376L570.629,676.925C591.465,691.474,633.138,720.573,653.974,739.948C674.811,759.322,674.811,768.972,674.811,773.797L674.811,778.622"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-UseServerVel LE-PosExt" id="L-UseServerVel-PosExt-0" d="M316.682,817.422L316.682,821.589C316.682,825.755,316.682,834.089,333.692,842.221C350.703,850.354,384.723,858.286,401.734,862.252L418.744,866.218"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-UseClientVel LE-PosExt" id="L-UseClientVel-PosExt-0" d="M674.811,817.422L674.811,821.589C674.811,825.755,674.811,834.089,657.8,842.221C640.79,850.354,606.769,858.286,589.758,862.252L572.748,866.218"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-PosExt LE-Clamp" id="L-PosExt-Clamp-0" d="M495.746,900.922L495.746,905.089C495.746,909.255,495.746,917.589,495.746,925.039C495.746,932.489,495.746,939.055,495.746,942.339L495.746,945.622"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(170.4375, 415.671875)" class="edgeLabel"><g transform="translate(-11.32421875, -9.25)" class="label"><foreignObject height="18.5" width="22.6484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Yes</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(495.74609375, 415.671875)" class="edgeLabel"><g transform="translate(-9.3984375, -9.25)" class="label"><foreignObject height="18.5" width="18.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(316.681640625, 749.671875)" class="edgeLabel"><g transform="translate(-11.32421875, -9.25)" class="label"><foreignObject height="18.5" width="22.6484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Yes</span></div></foreignObject></g></g><g transform="translate(674.810546875, 749.671875)" class="edgeLabel"><g transform="translate(-9.3984375, -9.25)" class="label"><foreignObject height="18.5" width="18.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(333.091796875, 16.75)" data-id="NeedPos" data-node="true" id="flowchart-NeedPos-0" class="node default default flowchart-label"><rect height="33.5" width="226.2734375" y="-16.75" x="-113.13671875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-105.63671875, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="211.2734375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Need position for renderTime</span></div></foreignObject></g></g><g transform="translate(333.091796875, 232.4609375)" data-id="TwoSnapshots" data-node="true" id="flowchart-TwoSnapshots-1" class="node default default flowchart-label"><polygon style="" transform="translate(-148.9609375,148.9609375)" class="label-container" points="148.9609375,0 297.921875,-148.9609375 148.9609375,-297.921875 0,-148.9609375"/><g transform="translate(-124.7109375, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="249.421875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Two snapshots around renderTime?</span></div></foreignObject></g></g><g transform="translate(170.4375, 466.671875)" data-id="Interpolate" data-node="true" id="flowchart-Interpolate-2" class="node default default flowchart-label"><rect height="33.5" width="340.875" y="-16.75" x="-170.4375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-162.9375, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="325.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Interpolate between buffer[i] and buffer[i+1]</span></div></foreignObject></g></g><g transform="translate(170.4375, 624.421875)" data-id="IgnoreVel" data-node="true" id="flowchart-IgnoreVel-3" class="node default default flowchart-label"><rect height="33.5" width="325.3125" y="-16.75" x="-162.65625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-155.15625, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="310.3125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Ignore velocity; path defined by two points</span></div></foreignObject></g></g><g transform="translate(495.74609375, 466.671875)" data-id="Extrapolate" data-node="true" id="flowchart-Extrapolate-4" class="node default default flowchart-label"><rect height="33.5" width="209.7421875" y="-16.75" x="-104.87109375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-97.37109375, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="194.7421875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Extrapolate: buffer run dry</span></div></foreignObject></g></g><g transform="translate(495.74609375, 624.421875)" data-id="HasServerVel" data-node="true" id="flowchart-HasServerVel-5" class="node default default flowchart-label"><polygon style="" transform="translate(-91,91)" class="label-container" points="91,0 182,-91 91,-182 0,-91"/><g transform="translate(-66.75, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="133.5"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Server sent vx, vy?</span></div></foreignObject></g></g><g transform="translate(316.681640625, 800.671875)" data-id="UseServerVel" data-node="true" id="flowchart-UseServerVel-6" class="node default default flowchart-label"><rect height="33.5" width="288.859375" y="-16.75" x="-144.4296875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-136.9296875, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="273.859375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Use server vx, vy from latest snapshot</span></div></foreignObject></g></g><g transform="translate(674.810546875, 800.671875)" data-id="UseClientVel" data-node="true" id="flowchart-UseClientVel-7" class="node default default flowchart-label"><rect height="33.5" width="327.3984375" y="-16.75" x="-163.69921875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-156.19921875, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="312.3984375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Derive velocity from last two buffer entries</span></div></foreignObject></g></g><g transform="translate(495.74609375, 967.671875)" data-id="Clamp" data-node="true" id="flowchart-Clamp-8" class="node default default flowchart-label"><rect height="33.5" width="349" y="-16.75" x="-174.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-167, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="334"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Clamp to EXTRAPOLATION_MAX_MS e.g. 300ms</span></div></foreignObject></g></g><g transform="translate(495.74609375, 884.171875)" data-id="PosExt" data-node="true" id="flowchart-PosExt-9" class="node default default flowchart-label"><rect height="33.5" width="283.265625" y="-16.75" x="-141.6328125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-134.1328125, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="268.265625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">position = latest + velocity * timePast</span></div></foreignObject></g></g><g transform="translate(782.376953125, 16.75)" data-id="note1" data-node="true" id="flowchart-note1-30" class="node default default flowchart-label"><rect height="33.5" width="572.296875" y="-16.75" x="-286.1484375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-278.6484375, -9.25)" style="" class="label"><rect/><foreignObject height="18.5" width="557.296875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Server velocity: intent-aware, stable; client-derived: can be noisy from jitter</span></div></foreignObject></g></g></g></g></g></svg>